<script setup lang="ts">
import {ref} from "vue";
import IconButton from "./IconButton.vue";
import Menu from "./Menu.vue";
import {changePage} from "@/utility.ts";

const isMenu = ref(false);

function handleSignIn() {
    if ($cookies.isKey("access-token")) {
        changePage('/profile');
    }
    else {
        changePage('/login');
    }
}

</script>

<template>
    <nav class="w-full max-h-[8.5rem] z-5 flex justify-between border-b-2 border-primary">
        <IconButton @click="isMenu = true">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 8h12M6 12h12M6 16h12"/></svg>
        </IconButton>
            
        <!-- logo -->
        <div class="flex items-center hover:cursor-pointer" @click="changePage('/')">
<!--            <img src="../assets/icons/logo256.png" alt="Flash project Icon" class="h-16 w-16">-->
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="h-16 w-16" viewBox="0 0 64 64">
                <g id="surface1">
                    <path class="fill-black" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 29.375 -0.125 C 31.042969 -0.125 32.707031 -0.125 34.375 -0.125 C 46.847656 1.386719 55.804688 7.804688 61.25 19.125 C 62.605469 22.539062 63.480469 26.039062 63.875 29.625 C 63.875 31.207031 63.875 32.792969 63.875 34.375 C 62.078125 48.429688 54.492188 57.804688 41.125 62.5 C 38.871094 63.113281 36.621094 63.570312 34.375 63.875 C 32.707031 63.875 31.042969 63.875 29.375 63.875 C 15.332031 62.082031 5.957031 54.496094 1.25 41.125 C 0.636719 38.871094 0.179688 36.621094 -0.125 34.375 C -0.125 32.707031 -0.125 31.042969 -0.125 29.375 C 1.386719 16.902344 7.804688 7.945312 19.125 2.5 C 22.464844 1.1875 25.878906 0.3125 29.375 -0.125 Z M 29.375 -0.125 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 31.375 1.875 C 31.515625 2.257812 31.683594 2.632812 31.875 3 C 31.175781 3.449219 30.550781 3.988281 30 4.625 C 29.648438 4.304688 29.273438 4.011719 28.875 3.75 C 27.910156 3.84375 26.953125 3.800781 26 3.625 C 24.730469 4.101562 23.855469 4.933594 23.375 6.125 C 23.417969 6.457031 23.457031 6.792969 23.5 7.125 C 23.640625 7.253906 23.808594 7.339844 24 7.375 C 24.945312 7.027344 25.695312 6.445312 26.25 5.625 C 27.046875 6.019531 27.671875 5.808594 28.125 5 C 28.484375 4.804688 28.820312 4.847656 29.125 5.125 C 29.46875 5.542969 29.804688 5.960938 30.125 6.375 C 30.027344 6.820312 29.863281 7.234375 29.625 7.625 C 29.875 7.792969 30.125 7.957031 30.375 8.125 C 30.304688 9.183594 29.804688 9.933594 28.875 10.375 C 28.417969 10.1875 28 9.9375 27.625 9.625 C 27.097656 9.972656 26.597656 10.347656 26.125 10.75 C 25.292969 10.832031 24.457031 10.917969 23.625 11 C 22.5 11.480469 21.332031 11.8125 20.125 12 C 19.238281 12.734375 18.238281 13.277344 17.125 13.625 C 16.859375 14.800781 16.566406 15.96875 16.25 17.125 C 15.652344 16.199219 15.113281 15.238281 14.625 14.25 C 12.480469 13.578125 10.6875 14.117188 9.25 15.875 C 8.277344 18.15625 8.984375 19.15625 11.375 18.875 C 11.414062 19.21875 11.371094 19.550781 11.25 19.875 C 10.839844 20.179688 10.464844 20.515625 10.125 20.875 C 10.902344 21.53125 11.070312 22.320312 10.625 23.25 C 11.652344 25.996094 13.152344 26.289062 15.125 24.125 C 16.472656 24.964844 17.886719 25.671875 19.375 26.25 C 20.773438 27.175781 22.148438 28.136719 23.5 29.125 C 24.214844 30.734375 25.089844 32.234375 26.125 33.625 C 24.648438 40.351562 20.484375 43.769531 13.625 43.875 C 13.625 46.625 13.625 49.375 13.625 52.125 C 14.792969 52.125 15.957031 52.125 17.125 52.125 C 16.945312 52.730469 16.695312 53.316406 16.375 53.875 C 16.652344 54.953125 16.902344 56.035156 17.125 57.125 C 16.917969 57.347656 16.667969 57.429688 16.375 57.375 C 15.992188 57.394531 15.742188 57.226562 15.625 56.875 C 14.796875 56.054688 14.089844 55.140625 13.5 54.125 C 13.335938 52.640625 13.042969 51.183594 12.625 49.75 C 12.773438 47.253906 13.023438 44.753906 13.375 42.25 C 13.269531 41.453125 13.019531 40.703125 12.625 40 C 12.726562 39.714844 12.8125 39.421875 12.875 39.125 C 11.878906 38.085938 10.917969 37 10 35.875 C 9.457031 34.335938 9.292969 32.75 9.5 31.125 C 10.230469 30.082031 10.894531 29 11.5 27.875 C 11.667969 27.207031 11.667969 26.542969 11.5 25.875 C 10.925781 25.550781 10.425781 25.136719 10 24.625 C 9.507812 23.261719 8.964844 21.929688 8.375 20.625 C 6.539062 20.035156 5.789062 18.785156 6.125 16.875 C 10.898438 8.738281 17.984375 3.863281 27.375 2.25 C 28.703125 2.042969 30.035156 1.917969 31.375 1.875 Z M 31.375 1.875 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 31.375 1.875 C 31.792969 1.875 32.207031 1.875 32.625 1.875 C 32.402344 2.671875 32.152344 3.464844 31.875 4.25 C 31.96875 5.644531 32.550781 6.769531 33.625 7.625 C 34.511719 6.652344 35.425781 5.695312 36.375 4.75 C 36.875 4.542969 37.375 4.332031 37.875 4.125 C 38.152344 3.644531 38.488281 3.230469 38.875 2.875 C 41.988281 3.410156 44.820312 4.578125 47.375 6.375 C 47.042969 6.375 46.707031 6.375 46.375 6.375 C 46.308594 7.402344 46.433594 8.402344 46.75 9.375 C 47.140625 9.589844 47.558594 9.757812 48 9.875 C 48.476562 10.660156 49.183594 10.992188 50.125 10.875 C 50.953125 12.894531 50.371094 14.308594 48.375 15.125 C 48.527344 13.84375 48.359375 12.679688 47.875 11.625 C 47.234375 10.351562 46.234375 9.644531 44.875 9.5 C 45.21875 10.136719 45.050781 10.636719 44.375 11 C 44.5625 11.167969 44.648438 11.375 44.625 11.625 C 37.347656 11.902344 32.390625 15.402344 29.75 22.125 C 28.507812 25.980469 27.296875 29.8125 26.125 33.625 C 25.089844 32.234375 24.214844 30.734375 23.5 29.125 C 22.148438 28.136719 20.773438 27.175781 19.375 26.25 C 17.886719 25.671875 16.472656 24.964844 15.125 24.125 C 13.152344 26.289062 11.652344 25.996094 10.625 23.25 C 11.070312 22.320312 10.902344 21.53125 10.125 20.875 C 10.464844 20.515625 10.839844 20.179688 11.25 19.875 C 11.371094 19.550781 11.414062 19.21875 11.375 18.875 C 8.984375 19.15625 8.277344 18.15625 9.25 15.875 C 10.6875 14.117188 12.480469 13.578125 14.625 14.25 C 15.113281 15.238281 15.652344 16.199219 16.25 17.125 C 16.566406 15.96875 16.859375 14.800781 17.125 13.625 C 18.238281 13.277344 19.238281 12.734375 20.125 12 C 21.332031 11.8125 22.5 11.480469 23.625 11 C 24.457031 10.917969 25.292969 10.832031 26.125 10.75 C 26.597656 10.347656 27.097656 9.972656 27.625 9.625 C 28 9.9375 28.417969 10.1875 28.875 10.375 C 29.804688 9.933594 30.304688 9.183594 30.375 8.125 C 30.125 7.957031 29.875 7.792969 29.625 7.625 C 29.863281 7.234375 30.027344 6.820312 30.125 6.375 C 29.804688 5.960938 29.46875 5.542969 29.125 5.125 C 28.820312 4.847656 28.484375 4.804688 28.125 5 C 27.671875 5.808594 27.046875 6.019531 26.25 5.625 C 25.695312 6.445312 24.945312 7.027344 24 7.375 C 23.808594 7.339844 23.640625 7.253906 23.5 7.125 C 23.457031 6.792969 23.417969 6.457031 23.375 6.125 C 23.855469 4.933594 24.730469 4.101562 26 3.625 C 26.953125 3.800781 27.910156 3.84375 28.875 3.75 C 29.273438 4.011719 29.648438 4.304688 30 4.625 C 30.550781 3.988281 31.175781 3.449219 31.875 3 C 31.683594 2.632812 31.515625 2.257812 31.375 1.875 Z M 31.375 1.875 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 32.625 1.875 C 34.785156 1.945312 36.867188 2.277344 38.875 2.875 C 38.488281 3.230469 38.152344 3.644531 37.875 4.125 C 37.375 4.332031 36.875 4.542969 36.375 4.75 C 35.425781 5.695312 34.511719 6.652344 33.625 7.625 C 32.550781 6.769531 31.96875 5.644531 31.875 4.25 C 32.152344 3.464844 32.402344 2.671875 32.625 1.875 Z M 32.625 1.875 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 37.625 5.625 C 38.921875 5.605469 39.171875 6.105469 38.375 7.125 C 37.476562 7.503906 36.726562 7.292969 36.125 6.5 C 36.609375 6.136719 37.109375 5.84375 37.625 5.625 Z M 37.625 5.625 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 47.375 6.375 C 51.871094 8.996094 55.410156 12.578125 58 17.125 C 58.835938 18.546875 59.460938 20.046875 59.875 21.625 C 59.339844 20.636719 58.507812 20.09375 57.375 20 C 57.054688 19.648438 56.761719 19.273438 56.5 18.875 C 56.328125 19.089844 56.121094 19.253906 55.875 19.375 C 55.542969 18.957031 55.207031 18.542969 54.875 18.125 C 53.683594 18.941406 53.183594 18.609375 53.375 17.125 C 52.503906 17.023438 51.671875 16.773438 50.875 16.375 C 50.582031 17.097656 50.414062 17.847656 50.375 18.625 C 49.71875 18.773438 49.050781 18.855469 48.375 18.875 C 48.375 17.625 48.375 16.375 48.375 15.125 C 50.371094 14.308594 50.953125 12.894531 50.125 10.875 C 49.183594 10.992188 48.476562 10.660156 48 9.875 C 47.558594 9.757812 47.140625 9.589844 46.75 9.375 C 46.433594 8.402344 46.308594 7.402344 46.375 6.375 C 46.707031 6.375 47.042969 6.375 47.375 6.375 Z M 47.375 6.375 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 47.875 11.625 C 46.792969 11.625 45.707031 11.625 44.625 11.625 C 44.648438 11.375 44.5625 11.167969 44.375 11 C 45.050781 10.636719 45.21875 10.136719 44.875 9.5 C 46.234375 9.644531 47.234375 10.351562 47.875 11.625 Z M 47.875 11.625 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,100%,99.607843%);fill-opacity:1;" d="M 44.625 11.625 C 45.707031 11.625 46.792969 11.625 47.875 11.625 C 48.359375 12.679688 48.527344 13.84375 48.375 15.125 C 48.375 16.375 48.375 17.625 48.375 18.875 C 48.375 19.207031 48.375 19.542969 48.375 19.875 C 48.125 19.875 47.875 19.875 47.625 19.875 C 41.839844 19.890625 38.089844 22.640625 36.375 28.125 C 38.207031 28.125 40.042969 28.125 41.875 28.125 C 42.625 28.125 43.375 28.125 44.125 28.125 C 44.125 30.207031 44.125 32.292969 44.125 34.375 C 40.835938 34.625 37.503906 34.707031 34.125 34.625 C 33.242188 38.8125 31.703125 42.730469 29.5 46.375 C 26.214844 50.042969 22.089844 51.960938 17.125 52.125 C 15.957031 52.125 14.792969 52.125 13.625 52.125 C 13.625 49.375 13.625 46.625 13.625 43.875 C 20.484375 43.769531 24.648438 40.351562 26.125 33.625 C 27.296875 29.8125 28.507812 25.980469 29.75 22.125 C 32.390625 15.402344 37.347656 11.902344 44.625 11.625 Z M 44.625 11.625 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 59.875 21.625 C 59.914062 21.96875 59.871094 22.300781 59.75 22.625 C 58.898438 22.425781 58.023438 22.300781 57.125 22.25 C 56.253906 21.523438 55.335938 20.855469 54.375 20.25 C 52.855469 20.15625 51.355469 19.949219 49.875 19.625 C 49.351562 19.644531 48.851562 19.726562 48.375 19.875 C 48.375 19.542969 48.375 19.207031 48.375 18.875 C 49.050781 18.855469 49.71875 18.773438 50.375 18.625 C 50.414062 17.847656 50.582031 17.097656 50.875 16.375 C 51.671875 16.773438 52.503906 17.023438 53.375 17.125 C 53.183594 18.609375 53.683594 18.941406 54.875 18.125 C 55.207031 18.542969 55.542969 18.957031 55.875 19.375 C 56.121094 19.253906 56.328125 19.089844 56.5 18.875 C 56.761719 19.273438 57.054688 19.648438 57.375 20 C 58.507812 20.09375 59.339844 20.636719 59.875 21.625 Z M 59.875 21.625 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 6.125 16.875 C 5.789062 18.785156 6.539062 20.035156 8.375 20.625 C 8.964844 21.929688 9.507812 23.261719 10 24.625 C 10.425781 25.136719 10.925781 25.550781 11.5 25.875 C 11.667969 26.542969 11.667969 27.207031 11.5 27.875 C 10.894531 29 10.230469 30.082031 9.5 31.125 C 9.292969 32.75 9.457031 34.335938 10 35.875 C 10.917969 37 11.878906 38.085938 12.875 39.125 C 12.8125 39.421875 12.726562 39.714844 12.625 40 C 13.019531 40.703125 13.269531 41.453125 13.375 42.25 C 13.023438 44.753906 12.773438 47.253906 12.625 49.75 C 13.042969 51.183594 13.335938 52.640625 13.5 54.125 C 14.089844 55.140625 14.796875 56.054688 15.625 56.875 C 8.679688 52.375 4.304688 46.042969 2.5 37.875 C 1.335938 31.785156 1.917969 25.867188 4.25 20.125 C 4.753906 18.945312 5.378906 17.859375 6.125 16.875 Z M 6.125 16.875 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 14.625 18.125 C 15.757812 18.617188 16.925781 19.035156 18.125 19.375 C 16.65625 19.671875 15.238281 19.503906 13.875 18.875 C 14.085938 18.566406 14.335938 18.316406 14.625 18.125 Z M 14.625 18.125 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 59.875 21.625 C 64.023438 34.574219 61.105469 45.699219 51.125 55 C 50.328125 55.605469 49.492188 56.148438 48.625 56.625 C 49.109375 54.777344 49.777344 52.984375 50.625 51.25 C 50.242188 50.320312 50.117188 49.359375 50.25 48.375 C 51.191406 46.90625 52.066406 45.40625 52.875 43.875 C 52.621094 42.871094 52.371094 41.871094 52.125 40.875 C 52.15625 40.074219 52.363281 39.324219 52.75 38.625 C 52.917969 37.875 52.917969 37.125 52.75 36.375 C 51.703125 36.203125 50.621094 35.953125 49.5 35.625 C 47.496094 36.109375 45.703125 35.691406 44.125 34.375 C 44.125 32.292969 44.125 30.207031 44.125 28.125 C 43.375 28.125 42.625 28.125 41.875 28.125 C 42.339844 26.980469 42.503906 25.8125 42.375 24.625 C 42.675781 23.117188 43.59375 22.242188 45.125 22 C 45.707031 20.957031 46.539062 20.25 47.625 19.875 C 47.875 19.875 48.125 19.875 48.375 19.875 C 48.851562 19.726562 49.351562 19.644531 49.875 19.625 C 51.355469 19.949219 52.855469 20.15625 54.375 20.25 C 55.335938 20.855469 56.253906 21.523438 57.125 22.25 C 58.023438 22.300781 58.898438 22.425781 59.75 22.625 C 59.871094 22.300781 59.914062 21.96875 59.875 21.625 Z M 59.875 21.625 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 47.625 19.875 C 46.539062 20.25 45.707031 20.957031 45.125 22 C 43.59375 22.242188 42.675781 23.117188 42.375 24.625 C 42.503906 25.8125 42.339844 26.980469 41.875 28.125 C 40.042969 28.125 38.207031 28.125 36.375 28.125 C 38.089844 22.640625 41.839844 19.890625 47.625 19.875 Z M 47.625 19.875 "/>
                    <path class="fill-primary" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 18.625 20.375 C 19.003906 20.671875 19.421875 20.921875 19.875 21.125 C 19.824219 21.273438 19.738281 21.398438 19.625 21.5 C 18.808594 21.460938 17.972656 21.378906 17.125 21.25 C 17.609375 20.886719 18.109375 20.59375 18.625 20.375 Z M 18.625 20.375 "/>
                    <path class="fill-primary/70" style="stroke:none;fill-rule:evenodd;fill-opacity:1;" d="M 44.125 34.375 C 45.703125 35.691406 47.496094 36.109375 49.5 35.625 C 50.621094 35.953125 51.703125 36.203125 52.75 36.375 C 52.917969 37.125 52.917969 37.875 52.75 38.625 C 52.363281 39.324219 52.15625 40.074219 52.125 40.875 C 52.371094 41.871094 52.621094 42.871094 52.875 43.875 C 52.066406 45.40625 51.191406 46.90625 50.25 48.375 C 50.117188 49.359375 50.242188 50.320312 50.625 51.25 C 49.777344 52.984375 49.109375 54.777344 48.625 56.625 C 39.65625 62.433594 30.15625 63.390625 20.125 59.5 C 18.777344 58.910156 17.527344 58.203125 16.375 57.375 C 16.667969 57.429688 16.917969 57.347656 17.125 57.125 C 16.902344 56.035156 16.652344 54.953125 16.375 53.875 C 16.695312 53.316406 16.945312 52.730469 17.125 52.125 C 22.089844 51.960938 26.214844 50.042969 29.5 46.375 C 31.703125 42.730469 33.242188 38.8125 34.125 34.625 C 37.503906 34.707031 40.835938 34.625 44.125 34.375 Z M 44.125 34.375 "/>
                </g>
            </svg>
            <h2 class="ml-5 text-5xl tiny5-regular">Flash World</h2>
        </div>

        <div class="btn-nav-group z-1 flex">
            <IconButton @click="changePage('/shop')">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke-width="1.5"><path d="m19.5 9.5l-.71-2.605c-.274-1.005-.411-1.507-.692-1.886A2.5 2.5 0 0 0 17 4.172C16.56 4 16.04 4 15 4M4.5 9.5l.71-2.605c.274-1.005.411-1.507.692-1.886A2.5 2.5 0 0 1 7 4.172C7.44 4 7.96 4 9 4"/><path d="M9 4a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 18L12 9m7.5 9l-7-8.5m-8 .5L12 21l7.5-11"/><path stroke-linecap="round" d="M3.864 16.455c.546 2.183.819 3.274 1.632 3.91C6.31 21 7.435 21 9.685 21h4.63c2.25 0 3.375 0 4.19-.635c.813-.636 1.086-1.727 1.631-3.91c.858-3.432 1.287-5.147.387-6.301C19.622 9 17.853 9 14.316 9H9.685c-3.538 0-5.306 0-6.207 1.154c-.529.677-.6 1.548-.394 2.846"/></g></svg>
            </IconButton>
            <IconButton @click="handleSignIn">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path d="M5.85 17.1q1.275-.975 2.85-1.537T12 15t3.3.563t2.85 1.537q.875-1.025 1.363-2.325T20 12q0-3.325-2.337-5.663T12 4T6.337 6.338T4 12q0 1.475.488 2.775T5.85 17.1M12 13q-1.475 0-2.488-1.012T8.5 9.5t1.013-2.488T12 6t2.488 1.013T15.5 9.5t-1.012 2.488T12 13m0 9q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"/></svg>
            </IconButton>
        </div>
    </nav>
    
    <Transition name="menuLeft">
        <Menu v-if="isMenu" @closeMenu="isMenu = false"/>
    </Transition>
    <Transition name="menuBlur">
        <div v-if="isMenu" class="fixed top-0 right-0 w-full h-full bg-[#000000B2] backdrop-blur-[2px] z-10" />
    </Transition>
</template>

<style scoped>
    @import url('https://fonts.googleapis.com/css2?family=Tiny5&display=swap');
    
    .btn-nav-group div {
        margin-left: 0;
    }

    .menuLeft-enter-active,
    .menuLeft-leave-active {
        transition: left 0.3s ease;
    }
    
    .menuBlur-enter-active,
    .menuBlur-leave-active {
        transition: opacity 0.3s ease;
    }

    .menuLeft-enter-from,
    .menuLeft-leave-to {
        left: -100%;
    }

    .menuBlur-enter-from,
    .menuBlur-leave-to {
        opacity: 0;
    }

    .tiny5-regular {
        font-family: "Tiny5", sans-serif;
    }    
</style>